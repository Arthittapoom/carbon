(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{553:function(e,n,t){"use strict";t.r(n);var r=t(39),o=(t(79),t(21),t(37),t(6),t(2),t(73)),l={data:function(){return{file:null,uploading:!1,files:[]}},created:function(){this.fetchFiles()},methods:{handleFileChange:function(e){this.file=e.target.files[0]},fileToBase64:function(e){return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,t){var r=new FileReader;r.onloadend=function(){return n(r.result)},r.onerror=t,r.readAsDataURL(e)})));case 1:case"end":return n.stop()}}),n)})))()},uploadFile:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var t,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.file){n.next=2;break}return n.abrupt("return");case 2:return e.uploading=!0,n.prev=3,n.next=6,e.fileToBase64(e.file);case 6:return t=n.sent,r=o.a.database().ref("files"),l=r.push(),n.next=11,l.set({fileName:e.file.name,fileData:t,uploadDate:(new Date).toLocaleString()});case 11:e.fetchFiles(),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(3),console.error("Error uploading file:",n.t0);case 17:return n.prev=17,e.uploading=!1,n.finish(17);case 20:case"end":return n.stop()}}),n,null,[[3,14,17,20]])})))()},fetchFiles:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var t,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=o.a.database().ref("files"),n.next=3,t.once("value");case 3:r=n.sent,l=r.val(),e.files=l?Object.keys(l).map((function(e){return{id:e,fileName:l[e].fileName,uploadDate:l[e].uploadDate,fileData:l[e].fileData}})):[];case 6:case"end":return n.stop()}}),n)})))()},deleteFile:function(e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.a.database().ref("files").child(e),t.next=3,r.remove();case 3:n.fetchFiles();case 4:case"end":return t.stop()}}),t)})))()},viewFile:function(e){var n=e.fileData;window.open(n,"_blank").focus()},downloadFile:function(e){var n=e.fileData.split(",")[1],link=document.createElement("a");link.href="data:application/octet-stream;base64,".concat(n),link.download=e.fileName,link.click()}}},c=t(53),component=Object(c.a)(l,(function(){var e=this,n=e._self._c;return n("div",[n("input",{attrs:{type:"file"},on:{change:e.handleFileChange}}),e._v(" "),n("button",{on:{click:e.uploadFile}},[e._v("Upload")]),e._v(" "),e.uploading?n("p",[e._v("Uploading...")]):e._e(),e._v(" "),e.files.length?n("div",[n("h3",[e._v("Uploaded Files")]),e._v(" "),n("ul",e._l(e.files,(function(t,r){return n("li",{key:t.id},[n("div",[n("strong",[e._v(e._s(t.fileName))]),e._v(" "),n("p",[e._v("Uploaded on: "+e._s(t.uploadDate))]),e._v(" "),n("button",{on:{click:function(n){return e.deleteFile(t.id)}}},[e._v("Delete")]),e._v(" "),n("button",{on:{click:function(n){return e.viewFile(t)}}},[e._v("View")]),e._v(" "),n("button",{on:{click:function(n){return e.downloadFile(t)}}},[e._v("Download")])])])})),0)]):e._e()])}),[],!1,null,null,null);n.default=component.exports}}]);