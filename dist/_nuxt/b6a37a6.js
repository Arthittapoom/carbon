(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{377:function(t,r,e){"use strict";e.d(r,"a",(function(){return x}));var n,o="https://js.stripe.com/v3",c=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,d="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",l=function(t){var r=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",script=document.createElement("script");script.src="".concat(o).concat(r);var e=document.head||document.body;if(!e)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return e.appendChild(script),script},f=null,v=null,m=null,h=function(t){return null!==f?f:(f=new Promise((function(r,e){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe&&t&&console.warn(d),window.Stripe)r(window.Stripe);else try{var script=function(){for(var t=document.querySelectorAll('script[src^="'.concat(o,'"]')),i=0;i<t.length;i++){var script=t[i];if(c.test(script.src))return script}return null}();if(script&&t)console.warn(d);else if(script){if(script&&null!==m&&null!==v){var n;script.removeEventListener("load",m),script.removeEventListener("error",v),null===(n=script.parentNode)||void 0===n||n.removeChild(script),script=l(t)}}else script=l(t);m=function(t,r){return function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}}(r,e),v=function(t){return function(){t(new Error("Failed to load Stripe.js"))}}(e),script.addEventListener("load",m),script.addEventListener("error",v)}catch(t){return void e(t)}else r(null)}))).catch((function(t){return f=null,Promise.reject(t)}))},_=!1,w=function(){return n||(n=h(null).catch((function(t){return n=null,Promise.reject(t)})))};Promise.resolve().then((function(){return w()})).catch((function(t){_||console.warn(t)}));var x=function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];_=!0;var n=Date.now();return w().then((function(t){return function(t,r,e){if(null===t)return null;var n=t.apply(void 0,r);return function(t,r){t&&t._registerWrapper&&t._registerWrapper({name:"stripe-js",version:"5.6.0",startTime:r})}(n,e),n}(t,r,n)}))}},392:function(t,r,e){var content=e(453);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(59).default)("5d4402d4",content,!0,{sourceMap:!1})},452:function(t,r,e){"use strict";e(392)},453:function(t,r,e){var n=e(58)((function(i){return i[1]}));n.push([t.i,".main[data-v-73d868ab]{align-items:center;background:linear-gradient(to bottom right,#aad3d5 30%,#7daaae);display:flex;height:90vh;justify-content:center;width:100%}.card-button-back[data-v-73d868ab]{background-color:#00a1b4;border:none;border-radius:5px;color:#fff;cursor:pointer;height:50px;margin-left:50px;width:200px}.card-body[data-v-73d868ab]{background-color:#fff;border-radius:20px;box-shadow:0 0 10px 0 #d4d4d4;display:flex;gap:20px;height:80%;margin:100px;overflow-y:scroll;scrollbar-width:none;width:100%}.card-input[data-v-73d868ab]{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center}.card-button-withdraw[data-v-73d868ab]{background-color:#00a1b4;border:none;border-radius:5px;color:#fff;cursor:pointer;height:50px;margin-left:50px;width:200px}.card-left[data-v-73d868ab],.card-right[data-v-73d868ab]{height:100%;width:50%}.card-item-row[data-v-73d868ab]{align-items:center;display:flex;justify-content:space-around}.card-title[data-v-73d868ab]{color:#00a1b4}.card-title[data-v-73d868ab],.card-title-text[data-v-73d868ab]{font-size:25px;font-weight:700;padding-left:50px}.card-title-text[data-v-73d868ab]{color:#717171}.card-button[data-v-73d868ab]{background-color:#00b478;border:none;border-radius:5px;height:50px;margin:50px;width:200px}.card-button[data-v-73d868ab],.card-item[data-v-73d868ab]{box-shadow:0 0 10px 0 #d4d4d4;color:#fff;cursor:pointer}.card-item[data-v-73d868ab]{align-items:center;background-color:#00a1b4;border-radius:20px;display:flex;font:1em sans-serif;font-size:20px;font-weight:700;height:100px;justify-content:center;margin:20px;width:21%}.card-item[data-v-73d868ab]:hover{background-color:#adf7ff;color:#000}.card-item>p[data-v-73d868ab]{margin:0}",""]),n.locals={},t.exports=n},505:function(t,r,e){"use strict";e.r(r);e(182);var n=e(119),o=e.n(n),c=e(73),d=e(120),l=(e(377),{components:{Nevbar:d.a},data:function(){return{uid:null,formId:null,form:null}},mounted:function(){var t=this;c.a.auth().onAuthStateChanged((function(r){r?(t.uid=r.uid,t.formId=t.$route.query.formId,c.a.database().ref("T-VER-Form").child(t.formId).once("value").then((function(r){if(r.exists()){var form=r.val();3===form.status&&(t.form=form)}}))):o.a.fire({icon:"error",title:"เกิดข้อผิดพลาด",text:"กรุณาเข้าสู่ระบบ",confirmButtonText:"ตกลง",confirmButtonColor:"#007BFF"}).then((function(){t.$router.push("/login")}))}))},methods:{formatNumber:function(t){return new Intl.NumberFormat("th-TH").format(t)},goBack:function(){this.$router.go(-1)},pay:function(t){var r=this;o.a.fire({icon:"warning",title:"ยืนยันการชําระเงิน",showCancelButton:!0,confirmButtonText:"ยืนยัน",cancelButtonText:"ยกเลิก"}).then((function(e){e.isConfirmed&&c.a.database().ref("users/".concat(r.uid)).once("value",(function(e){var n=e.val().amount;if(t>Number(n)||t<=0)return o.a.fire({icon:"error",title:"เงินไม่เพียงพอ"});var d=Number(n)-t;c.a.database().ref("users/".concat(r.uid)).update({amount:d}),c.a.database().ref("T-VER-Form/".concat(r.formId,"/status")).set(4),c.a.database().ref("T-VER-Form/".concat(r.formId,"/payment")).set(r.uid),o.a.fire({icon:"success",title:"ชําระเงินเรียบร้อย",showConfirmButton:!1,timer:1500})}))}))}}}),f=(e(452),e(53)),component=Object(f.a)(l,(function(){var t=this,r=t._self._c;return r("div",[r("Nevbar"),t._v(" "),r("div",{staticClass:"main"},[r("div",{staticClass:"card-body"},[t.form?r("div",{staticClass:"card-left"},[r("h3",[t._v("รายละเอียดฟอร์ม")]),t._v(" "),r("p",[r("strong",[t._v("ชื่อโครงการ (ภาษาอังกฤษ):")]),t._v(" "+t._s(t.form.projectNameEn))]),t._v(" "),r("p",[r("strong",[t._v("ชื่อโครงการ (ภาษาไทย):")]),t._v(" "+t._s(t.form.projectNameTh))]),t._v(" "),t._m(0),t._v(" "),r("ul",t._l(t.form.projectTypes,(function(e,n){return r("li",{key:n},[t._v(t._s(e))])})),0),t._v(" "),r("p",[r("strong",[t._v("ราคา:")]),t._v(" "+t._s(t.formatNumber(t.form.price))+" บาท")]),t._v(" "),r("p",[r("strong",[t._v("เบอร์โทร:")]),t._v(" "+t._s(t.form.phone))]),t._v(" "),r("p",[r("strong",[t._v("อีเมล์:")]),t._v(" "+t._s(t.form.email))]),t._v(" "),r("p",[r("strong",[t._v("ชื่อผู้ติดต่อ:")]),t._v(" "+t._s(t.form.contactName))]),t._v(" "),r("p",[r("strong",[t._v("ที่อยู่:")]),t._v(" "+t._s(t.form.address))]),t._v(" "),r("p",[r("strong",[t._v("วันที่ส่งฟอร์ม:")]),t._v(" "+t._s(new Date(t.form.date_submitForm).toLocaleString()))]),t._v(" "),r("p",[r("strong",[t._v("หมายเลขแฟกซ์:")]),t._v(" "+t._s(t.form.fax))]),t._v(" "),r("h4",[t._v("ไฟล์รับรอง")]),t._v(" "),r("ul",t._l(t.form.files,(function(e,n){return r("li",{key:n},[r("a",{attrs:{href:e.fileData,target:"_blank"}},[t._v(t._s(e.fileName))]),t._v(" (อัพโหลดเมื่อ: "+t._s(new Date(e.uploadDate).toLocaleString())+")\n                    ")])})),0)]):r("div",{staticClass:"card-left"},[r("p",[t._v("กำลังโหลดข้อมูล...")])]),t._v(" "),t.form?r("div",{staticClass:"card-right"},[r("p",{staticClass:"card-title"},[t._v("ชําระเงิน")]),t._v(" "),r("p",{staticClass:"card-title-text"},[t._v("จํานวนเงิน "+t._s(t.formatNumber(t.form.price))+" บาท")]),t._v(" "),r("button",{staticClass:"card-button-back",on:{click:t.goBack}},[t._v("ย้อนกลับ")]),t._v(" "),r("button",{staticClass:"card-button",on:{click:function(r){return t.pay(t.form.price)}}},[t._v("ชําระเงิน")])]):t._e()])])],1)}),[function(){var t=this._self._c;return t("p",[t("strong",[this._v("ประเภทโครงการ:")])])}],!1,null,"73d868ab",null);r.default=component.exports}}]);