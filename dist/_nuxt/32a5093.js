(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{432:function(t,r,e){var content=e(492);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(60).default)("0cd72d8b",content,!0,{sourceMap:!1})},491:function(t,r,e){"use strict";e(432)},492:function(t,r,e){var n=e(59)((function(i){return i[1]}));n.push([t.i,".withdraw-table[data-v-385c3518]{border-collapse:collapse;font-size:16px;margin-top:20px;width:100%}.withdraw-table td[data-v-385c3518],.withdraw-table th[data-v-385c3518]{border:1px solid #ddd;padding:12px;text-align:left}.withdraw-table th[data-v-385c3518]{background:#f4f4f4;font-weight:700;text-align:center}.withdraw-table-body tr[data-v-385c3518]:nth-child(2n){background:#f9f9f9}.status-pending[data-v-385c3518]{color:#ff9800;font-weight:700}.status-success[data-v-385c3518]{color:#4caf50;font-weight:700}.bank-info p[data-v-385c3518]{margin:4px 0}.confirm-btn[data-v-385c3518]{background:#007bff;border:none;border-radius:4px;color:#fff;cursor:pointer;padding:8px 12px}.confirm-btn[data-v-385c3518]:hover{background:#0056b3}",""]),n.locals={},t.exports=n},567:function(t,r,e){"use strict";e.r(r);e(35);var n=e(43),o=e(0),c=e(41),f=e(38),d=(e(80),e(20),e(5),e(3),e(460),e(22),e(462),e(257),e(7),e(8),e(6),e(2),e(463),e(65),e(466),e(467),e(468),e(472),e(473),e(474),e(475),e(477),e(479),e(481),e(483),e(484),e(485),e(486),e(487),e(489),e(4),e(69),e(74));function v(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?v(Object(e),!0).forEach((function(r){Object(o.a)(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):v(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}var h={layout:"menu",data:function(){return{uid:"",formList:[]}},mounted:function(){var t=this;d.a.auth().onAuthStateChanged((function(r){r?(t.uid=r.uid,t.fetchwithdraw()):Swal.fire({icon:"error",title:"เกิดข้อผิดพลาด",text:"กรุณาเข้าสู่ระบบ",confirmButtonText:"ตกลง",confirmButtonColor:"#007BFF"}).then((function(){t.$router.push("/login")}))}))},methods:{formatNumber:function(t){return new Intl.NumberFormat("th-TH").format(t)},confirmWithdraw:function(t){d.a.database().ref("withdraw/".concat(this.uid,"/").concat(t)).update({status:1})},fetchwithdraw:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function r(){var e;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:try{(e=d.a.database().ref("withdraw")).on("value",function(){var r=Object(f.a)(regeneratorRuntime.mark((function r(e){var data,o,v;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(data=e.val())){r.next=11;break}return t.formList=Object.entries(data).flatMap((function(t){var r=Object(c.a)(t,2),e=r[0],n=r[1];return Object.entries(n).map((function(t){var r=Object(c.a)(t,2),n=r[0];return l(l({},r[1]),{},{key:n,uid:e,userData:null})}))})),o=Object(n.a)(new Set(t.formList.map((function(t){return t.uid})))),v=o.map(function(){var t=Object(f.a)(regeneratorRuntime.mark((function t(r){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.database().ref("users/".concat(r)).once("value");case 2:return e=t.sent,t.abrupt("return",{uid:r,userData:e.val()});case 4:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()),r.next=7,Promise.all(v);case 7:r.sent.forEach((function(r){var e=r.uid,n=r.userData;t.formList.forEach((function(r){r.uid===e&&t.$set(r,"userData",n)}))})),r.next=12;break;case 11:t.formList=[];case 12:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()),t.withdrawRef=e}catch(t){console.error("เกิดข้อผิดพลาดในการดึงข้อมูล:",t)}case 1:case"end":return r.stop()}}),r)})))()}}},_=h,w=(e(491),e(55)),component=Object(w.a)(_,(function(){var t=this,r=t._self._c;return r("div",[r("h1",[t._v("รายการคำขอถอนเงิน")]),t._v(" "),r("table",{staticClass:"withdraw-table"},[t._m(0),t._v(" "),r("tbody",{staticClass:"withdraw-table-body"},t._l(t.formList,(function(e,n){var o,c,f,d,v;return r("tr",{key:n},[r("td",[t._v(t._s(e.date))]),t._v(" "),r("td",[t._v(t._s(e.time))]),t._v(" "),r("td",[t._v(t._s(t.formatNumber(e.amount))+" ฿")]),t._v(" "),r("td",[r("span",{class:{"status-pending":0===e.status,"status-success":1===e.status}},[t._v("\n                        "+t._s(0===e.status?"รอดำเนินการ":"สำเร็จ")+"\n                    ")])]),t._v(" "),r("td",[null!==(o=e.userData)&&void 0!==o&&o.bank?r("div",{staticClass:"bank-info"},[r("p",[r("strong",[t._v("ธนาคาร:")]),t._v(" "+t._s(null===(c=e.userData.bank)||void 0===c?void 0:c.bank))]),t._v(" "),r("p",[r("strong",[t._v("สาขา:")]),t._v(" "+t._s(null===(f=e.userData.bank)||void 0===f?void 0:f.branch))]),t._v(" "),r("p",[r("strong",[t._v("ชื่อบัญชี:")]),t._v(" "+t._s(null===(d=e.userData.bank)||void 0===d?void 0:d.name))]),t._v(" "),r("p",[r("strong",[t._v("เลขบัญชี:")]),t._v(" "+t._s(null===(v=e.userData.bank)||void 0===v?void 0:v.number))])]):r("div",[t._v("-")])]),t._v(" "),r("td",[r("button",{staticClass:"confirm-btn",on:{click:function(r){return t.confirmWithdraw(e.key)}}},[t._v("ยืนยัน")])])])})),0)])])}),[function(){var t=this,r=t._self._c;return r("thead",[r("tr",[r("th",[t._v("วันที่")]),t._v(" "),r("th",[t._v("เวลา")]),t._v(" "),r("th",[t._v("จำนวนเงิน")]),t._v(" "),r("th",[t._v("สถานะ")]),t._v(" "),r("th",[t._v("บัญชีธนาคาร")]),t._v(" "),r("th",[t._v("ดำเนินการ")])])])}],!1,null,"385c3518",null);r.default=component.exports}}]);