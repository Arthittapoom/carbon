(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{348:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r,o="https://js.stripe.com/v3",c=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,d="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",l=function(t){var e=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",script=document.createElement("script");script.src="".concat(o).concat(e);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(script),script},f=null,m=null,v=null,h=function(t){return null!==f?f:(f=new Promise((function(e,n){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe&&t&&console.warn(d),window.Stripe)e(window.Stripe);else try{var script=function(){for(var t=document.querySelectorAll('script[src^="'.concat(o,'"]')),i=0;i<t.length;i++){var script=t[i];if(c.test(script.src))return script}return null}();if(script&&t)console.warn(d);else if(script){if(script&&null!==v&&null!==m){var r;script.removeEventListener("load",v),script.removeEventListener("error",m),null===(r=script.parentNode)||void 0===r||r.removeChild(script),script=l(t)}}else script=l(t);v=function(t,e){return function(){window.Stripe?t(window.Stripe):e(new Error("Stripe.js not available"))}}(e,n),m=function(t){return function(){t(new Error("Failed to load Stripe.js"))}}(n),script.addEventListener("load",v),script.addEventListener("error",m)}catch(t){return void n(t)}else e(null)}))).catch((function(t){return f=null,Promise.reject(t)}))},w=!1,x=function(){return r||(r=h(null).catch((function(t){return r=null,Promise.reject(t)})))};Promise.resolve().then((function(){return x()})).catch((function(t){w||console.warn(t)}));var y=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];w=!0;var r=Date.now();return x().then((function(t){return function(t,e,n){if(null===t)return null;var r=t.apply(void 0,e);return function(t,e){t&&t._registerWrapper&&t._registerWrapper({name:"stripe-js",version:"5.6.0",startTime:e})}(r,n),r}(t,e,r)}))}},370:function(t,e,n){var content=n(443);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(66).default)("275ba07e",content,!0,{sourceMap:!1})},442:function(t,e,n){"use strict";n(370)},443:function(t,e,n){var r=n(65)((function(i){return i[1]}));r.push([t.i,".main[data-v-50441e3d]{align-items:center;background:linear-gradient(to bottom right,#aad3d5 30%,#7daaae);height:90vh;justify-content:center}.card-body[data-v-50441e3d],.main[data-v-50441e3d]{display:flex;width:100%}.card-body[data-v-50441e3d]{background-color:#fff;border-radius:20px;box-shadow:0 0 10px 0 #d4d4d4;gap:20px;height:500px;margin:100px}.card-input[data-v-50441e3d]{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center}.card-button-withdraw[data-v-50441e3d]{background-color:#00a1b4;border:none;border-radius:5px;color:#fff;cursor:pointer;height:50px;margin-left:50px;width:200px}.card-left[data-v-50441e3d],.card-right[data-v-50441e3d]{height:100%;width:50%}.card-item-row[data-v-50441e3d]{align-items:center;display:flex;justify-content:space-around}.card-title[data-v-50441e3d]{color:#00a1b4}.card-title[data-v-50441e3d],.card-title-text[data-v-50441e3d]{font-size:25px;font-weight:700;padding-left:50px}.card-title-text[data-v-50441e3d]{color:#717171}.card-button[data-v-50441e3d]{border:none;border-radius:5px;height:50px;margin:50px;width:200px}.card-button[data-v-50441e3d],.card-item[data-v-50441e3d]{background-color:#00a1b4;box-shadow:0 0 10px 0 #d4d4d4;color:#fff;cursor:pointer}.card-item[data-v-50441e3d]{align-items:center;border-radius:20px;display:flex;font:1em sans-serif;font-size:20px;font-weight:700;height:100px;justify-content:center;margin:20px;width:21%}.card-item[data-v-50441e3d]:hover{background-color:#adf7ff;color:#000}.card-item>p[data-v-50441e3d]{margin:0}",""]),r.locals={},t.exports=r},472:function(t,e,n){"use strict";n.r(e);var r=n(41),o=(n(94),n(19),n(181),n(118)),c=n.n(o),d=n(72),l=n(121),f=n(348),m={components:{Nevbar:l.a},data:function(){return{amount:0,amounts:[[100,200,500],[1e3,2e3,5e3],[1e4,2e4,5e4]],amountwithdraw:0,uid:null}},mounted:function(){var t=this;d.a.auth().onAuthStateChanged((function(e){e?t.uid=e.uid:alert("กรุณาเข้าสู่ระบบก่อนส่งข้อมูล")}))},methods:{formatNumber:function(t){return new Intl.NumberFormat("th-TH").format(t)},withdraw:function(){var t=this;d.a.database().ref("users/".concat(this.uid)).once("value",(function(e){var n=e.val().amount;if(console.log(n),t.amountwithdraw>Number(n))return c.a.fire({icon:"error",title:"เงินไม่เพียงพอ"});var r=Number(n)-t.amountwithdraw;d.a.database().ref("users/".concat(t.uid)).set({amount:r}),c.a.fire({icon:"success",title:"รอดำเนินการ",showConfirmButton:!1,timer:1500})}))},makePayment:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)("pk_test_51QGugcDQdoy5otPN53dXFXBzRt7oHOyzEMWW80RSC3lqguudCY1adU4Oo4NLXhdGzF0hlbDOgc6lVEuGHbn6Fwwg00ep3fLpqp");case 2:e.sent,d.a.database().ref("plyment/".concat(t.uid)).set({balance:t.amount,uid:t.uid,status:0}),c.a.fire({title:"ยืนยันการเติมเงิน",text:"ยืนยันการเติมเงิน ".concat(t.amount," บาท"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"ยืนยัน",cancelButtonText:"ยกเลิก"}).then((function(e){e.isConfirmed?t.$router.push("/success?amount=".concat(t.amount,"&uid=").concat(t.uid)):e.isDismissed&&t.$router.push("/cancel?uid=".concat(t.uid))}));case 5:case"end":return e.stop()}}),e)})))()},topup:function(){var t=this;console.log("จำนวนเงินที่เลือก:",this.amount),this.amount>0&&c.a.fire({title:"ยืนยันการเติมเงิน",text:"คุณต้องการเติมเงิน ".concat(this.formatNumber(this.amount)," บาทหรือไม่?"),icon:"question",showCancelButton:!0,confirmButtonText:"ยืนยัน",cancelButtonText:"ยกเลิก"}).then((function(e){e.isConfirmed&&t.makePayment()}))}}},v=(n(442),n(52)),component=Object(v.a)(m,(function(){var t=this,e=t._self._c;return e("div",[e("Nevbar"),t._v(" "),e("div",{staticClass:"main"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"card-left"},[e("p",{staticClass:"card-title"},[t._v("เลือกจำนวน")]),t._v(" "),t._l(t.amounts,(function(n,r){return e("div",{key:r,staticClass:"card-item-row"},t._l(n,(function(n){return e("div",{key:n,class:["card-item",{active:t.amount===n}],on:{click:function(e){t.amount=n}}},[e("p",[t._v(t._s(t.formatNumber(n))+" บาท")])])})),0)}))],2),t._v(" "),e("div",{staticClass:"card-right"},[e("p",{staticClass:"card-title"},[t._v("รายละเอียด")]),t._v(" "),e("p",{staticClass:"card-title-text"},[t._v("จำนวนเงิน "+t._s(t.formatNumber(t.amount))+" บาท")]),t._v(" "),e("button",{staticClass:"card-button",on:{click:t.topup}},[t._v("เติมเงิน")])])])])],1)}),[],!1,null,"50441e3d",null);e.default=component.exports}}]);