(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{360:function(t,e,r){var content=r(396);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(66).default)("1959edc4",content,!0,{sourceMap:!1})},395:function(t,e,r){"use strict";r(360)},396:function(t,e,r){var o=r(65)((function(i){return i[1]}));o.push([t.i,".container[data-v-49c17dda]{width:100%}.title[data-v-49c17dda]{text-align:center}.search-input[data-v-49c17dda]{margin-bottom:10px;padding:8px;width:100%}.data-table[data-v-49c17dda]{border-collapse:collapse;width:100%}.data-table td[data-v-49c17dda],.data-table th[data-v-49c17dda]{border:1px solid #ddd;padding:8px;text-align:left}.data-table th[data-v-49c17dda]{background-color:#f4f4f4;cursor:pointer}button[data-v-49c17dda]{background:#007bff;border:none;color:#fff;cursor:pointer;padding:5px 10px}.modal[data-v-49c17dda]{align-items:center;background:rgba(0,0,0,.5);display:flex;height:100%;justify-content:center;left:0;position:fixed;top:0;width:100%}.modal-content[data-v-49c17dda]{background:#fff;border-radius:5px;padding:20px;width:50%}",""]),o.locals={},t.exports=o},471:function(t,e,r){"use strict";r.r(e);r(23);var o=r(0),n=r(42),c=(r(5),r(3),r(97),r(20),r(98),r(250),r(7),r(8),r(6),r(2),r(143),r(4),r(72)),d=r(118),l=r.n(d);function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}var f={layout:"menu-profile",data:function(){return{formList:[],searchQuery:"",sortKey:"",selectedForm:null,uid:""}},computed:{filteredForms:function(){var t=this;return this.formList.filter((function(form){return form.projectNameTh.includes(t.searchQuery)||form.contactName.includes(t.searchQuery)||form.email.includes(t.searchQuery)})).sort((function(a,b){return t.sortKey?a[t.sortKey]>b[t.sortKey]?1:-1:0}))}},mounted:function(){var t=this;c.a.auth().onAuthStateChanged((function(e){e?t.uid=e.uid:l.a.fire({icon:"error",title:"เกิดข้อผิดพลาด",text:"กรุณาเข้าสู่ระบบ",confirmButtonText:"ตกลง",confirmButtonColor:"#007BFF"}).then((function(){t.$router.push("/login")}))})),this.fetchData(this.uid)},methods:{sell:function(form){l.a.fire({title:"กรุณากรอกราคา",input:"number",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"ยืนยัน",cancelButtonText:"ยกเลิก",showLoaderOnConfirm:!0,preConfirm:function(t){return t<0&&l.a.showValidationMessage("กรุณากรอกราคาให้ถูกต้อง"),{price:t}}})},rejectForm:function(form){l.a.fire({title:"กําลังโหลกเอกสาร",icon:"info",showConfirmButton:!1})},fetchData:function(t){var e=this;c.a.database().ref("T-VER-Form").on("value",(function(t){var data=t.val();e.formList=Object.entries(data||{}).map((function(t){var e=Object(n.a)(t,2);return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){Object(o.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({id:e[0]},e[1])})),e.uid&&(e.formList=e.formList.filter((function(form){return form.uid===e.uid})))}))},sortBy:function(t){this.sortKey=t},showDetails:function(form){this.selectedForm=form}}},_=f,h=(r(395),r(52)),component=Object(h.a)(_,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("h1",{staticClass:"title"},[t._v("สถานะคำขอรับรองคาร์บอนเครดิต")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"search-input",attrs:{placeholder:"ค้นหาโครงการ..."},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),t._v(" "),e("table",{staticClass:"data-table"},[e("thead",[e("tr",[e("th",{on:{click:function(e){return t.sortBy("projectNameTh")}}},[t._v("ชื่อโครงการ")]),t._v(" "),e("th",[t._v("ประเภทโครงการ")]),t._v(" "),e("th",{on:{click:function(e){return t.sortBy("contactName")}}},[t._v("ชื่อผู้ประสานงาน")]),t._v(" "),e("th",[t._v("สถานะ")]),t._v(" "),e("th",{on:{click:function(e){return t.sortBy("date_submitForm")}}},[t._v("เวลาส่ง")]),t._v(" "),e("th",[t._v("รายละเอียด")])])]),t._v(" "),e("tbody",t._l(t.filteredForms,(function(form){return e("tr",{key:form.id},[e("td",[t._v(t._s(form.projectNameTh))]),t._v(" "),e("td",[t._v(t._s(form.projectTypes.join(", ")))]),t._v(" "),e("td",[t._v(t._s(form.contactName))]),t._v(" "),e("td",[t._v(t._s("1"===form.status?"รอตรวจสอบ":"ยืนยันแล้ว")+"\n            "),t._v(" "),"2"===form.status?e("button",{on:{click:function(e){return t.sell(form)}}},[t._v("เสอนขาย")]):t._e()]),t._v(" "),e("td",[t._v(t._s(new Date(form.date_submitForm).toLocaleString()))]),t._v(" "),e("td",[e("button",{on:{click:function(e){return t.showDetails(form)}}},[t._v("ดูรายละเอียด")])])])})),0)]),t._v(" "),t.selectedForm?e("div",{staticClass:"modal"},[e("div",{staticClass:"modal-content"},[e("h2",[t._v("รายละเอียดโครงการ")]),t._v(" "),e("p",[e("strong",[t._v("ชื่อโครงการภาษาอังกฤษ:")]),t._v(" "+t._s(t.selectedForm.projectNameEn))]),t._v(" "),e("p",[e("strong",[t._v("ชื่อโครงการภาษาไทย:")]),t._v(" "+t._s(t.selectedForm.projectNameTh))]),t._v(" "),e("p",[e("strong",[t._v("ประเภทโครงการ:")]),t._v(" "+t._s(t.selectedForm.projectTypes.join(", ")))]),t._v(" "),e("p",[e("strong",[t._v("อื่น ๆ:")]),t._v(" "+t._s(t.selectedForm.otherProjectType||"-"))]),t._v(" "),e("h3",[t._v("รายละเอียดผู้พัฒนาโครงการ")]),t._v(" "),e("p",[e("strong",[t._v("ชื่อผู้ประสานงาน:")]),t._v(" "+t._s(t.selectedForm.contactName))]),t._v(" "),e("p",[e("strong",[t._v("ที่อยู่:")]),t._v(" "+t._s(t.selectedForm.address))]),t._v(" "),e("p",[e("strong",[t._v("โทรศัพท์:")]),t._v(" "+t._s(t.selectedForm.phone))]),t._v(" "),e("p",[e("strong",[t._v("โทรสาร:")]),t._v(" "+t._s(t.selectedForm.fax||"-"))]),t._v(" "),e("p",[e("strong",[t._v("อีเมล:")]),t._v(" "+t._s(t.selectedForm.email))]),t._v(" "),e("button",{on:{click:function(e){t.selectedForm=null}}},[t._v("ปิด")])])]):t._e()])}),[],!1,null,"49c17dda",null);e.default=component.exports}}]);