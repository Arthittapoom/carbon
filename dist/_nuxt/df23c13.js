(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{388:function(t,e,r){"use strict";r.d(e,"a",(function(){return j}));var n,o="https://js.stripe.com",c="".concat(o,"/v3"),d=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,l=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,f="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",m=function(t){var e=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",script=document.createElement("script");script.src="".concat(c).concat(e);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(script),script},v=null,h=null,w=null,x=function(t){return null!==v?v:(v=new Promise((function(e,r){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe&&t&&console.warn(f),window.Stripe)e(window.Stripe);else try{var script=function(){for(var t,e=document.querySelectorAll('script[src^="'.concat(o,'"]')),i=0;i<e.length;i++){var script=e[i];if(t=script.src,d.test(t)||l.test(t))return script}return null}();if(script&&t)console.warn(f);else if(script){if(script&&null!==w&&null!==h){var n;script.removeEventListener("load",w),script.removeEventListener("error",h),null===(n=script.parentNode)||void 0===n||n.removeChild(script),script=m(t)}}else script=m(t);w=function(t,e){return function(){window.Stripe?t(window.Stripe):e(new Error("Stripe.js not available"))}}(e,r),h=function(t){return function(e){t(new Error("Failed to load Stripe.js",{cause:e}))}}(r),script.addEventListener("load",w),script.addEventListener("error",h)}catch(t){return void r(t)}else e(null)}))).catch((function(t){return v=null,Promise.reject(t)}))},y=!1,_=function(){return n||(n=x(null).catch((function(t){return n=null,Promise.reject(t)})))};Promise.resolve().then((function(){return _()})).catch((function(t){y||console.warn(t)}));var j=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];y=!0;var n=Date.now();return _().then((function(t){return function(t,e,r){if(null===t)return null;var n=e[0].match(/^pk_test/),o=function(t){return 3===t?"v3":t}(t.version);n&&"v3"!==o&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("5.10.0"," expected Stripe.js@").concat("v3",". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=t.apply(void 0,e);return function(t,e){t&&t._registerWrapper&&t._registerWrapper({name:"stripe-js",version:"5.10.0",startTime:e})}(c,r),c}(t,e,n)}))}},451:function(t,e,r){var content=r(539);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(60).default)("ca4cf260",content,!0,{sourceMap:!1})},538:function(t,e,r){"use strict";r(451)},539:function(t,e,r){var n=r(59)((function(i){return i[1]}));n.push([t.i,".main[data-v-5fbcea34]{align-items:center;background:linear-gradient(to bottom right,#aad3d5 30%,#7daaae);height:90vh;justify-content:center}.card-body[data-v-5fbcea34],.main[data-v-5fbcea34]{display:flex;width:100%}.card-body[data-v-5fbcea34]{background-color:#fff;border-radius:20px;box-shadow:0 0 10px 0 #d4d4d4;gap:20px;height:500px;margin:100px}.card-input[data-v-5fbcea34]{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center}.card-button-withdraw[data-v-5fbcea34]{background-color:#00a1b4;border:none;border-radius:5px;color:#fff;cursor:pointer;height:50px;margin-left:50px;width:200px}.card-left[data-v-5fbcea34],.card-right[data-v-5fbcea34]{height:100%;width:50%}.card-item-row[data-v-5fbcea34]{align-items:center;display:flex;justify-content:space-around}.card-title[data-v-5fbcea34]{color:#00a1b4}.card-title[data-v-5fbcea34],.card-title-text[data-v-5fbcea34]{font-size:25px;font-weight:700;padding-left:50px}.card-title-text[data-v-5fbcea34]{color:#717171}.card-button[data-v-5fbcea34]{border:none;border-radius:5px;height:50px;margin:50px;width:200px}.card-button[data-v-5fbcea34],.card-item[data-v-5fbcea34]{background-color:#00a1b4;box-shadow:0 0 10px 0 #d4d4d4;color:#fff;cursor:pointer}.card-item[data-v-5fbcea34]{align-items:center;border-radius:20px;display:flex;font:1em sans-serif;font-size:20px;font-weight:700;height:100px;justify-content:center;margin:20px;width:21%}.card-item[data-v-5fbcea34]:hover{background-color:#adf7ff;color:#000}.card-item>p[data-v-5fbcea34]{margin:0}",""]),n.locals={},t.exports=n},585:function(t,e,r){"use strict";r.r(e);var n=r(38),o=(r(80),r(184),r(121)),c=r.n(o),d=r(74),l=r(123),f=r(388),m={components:{Nevbar:l.a},data:function(){return{amount:0,amounts:[[100,200,500],[1e3,2e3,5e3],[1e4,2e4,5e4]],amountwithdraw:0,uid:null}},mounted:function(){var t=this;d.a.auth().onAuthStateChanged((function(e){e?t.uid=e.uid:c.a.fire({icon:"error",title:"เกิดข้อผิดพลาด",text:"กรุณาเข้าสู่ระบบ",confirmButtonText:"ตกลง",confirmButtonColor:"#007BFF"}).then((function(){t.$router.push("/login")}))}))},methods:{formatNumber:function(t){return new Intl.NumberFormat("th-TH").format(t)},withdraw:function(){var t=this;d.a.database().ref("users/".concat(this.uid)).once("value",(function(e){var r=e.val().amount;if(t.amountwithdraw>Number(r))return c.a.fire({icon:"error",title:"เงินไม่เพียงพอ"});var n=Number(r)-t.amountwithdraw;d.a.database().ref("users/".concat(t.uid)).update({amount:n}),c.a.fire({icon:"success",title:"รอดำเนินการ",showConfirmButton:!1,timer:1500})}))},makePayment:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)("pk_test_51QGugcDQdoy5otPN53dXFXBzRt7oHOyzEMWW80RSC3lqguudCY1adU4Oo4NLXhdGzF0hlbDOgc6lVEuGHbn6Fwwg00ep3fLpqp");case 2:return r=e.sent,d.a.database().ref("plyment/".concat(t.uid)).set({balance:t.amount,uid:t.uid,status:0}),e.next=6,r.redirectToCheckout({lineItems:[{price:"price_1QpijtDQdoy5otPNXNgeQrw9",quantity:1}],mode:"subscription",successUrl:"https://carbon-kappa-steel.vercel.app/success?amount="+t.amount+"&uid="+t.uid,cancelUrl:"https://carbon-kappa-steel.vercel.app/cancel?uid="+t.uid});case 6:n=e.sent,(o=n.error)&&console.error("Stripe Error:",o);case 9:case"end":return e.stop()}}),e)})))()},topup:function(){var t=this;this.amount>0&&c.a.fire({title:"ยืนยันการเติมเงิน",text:"คุณต้องการเติมเงิน ".concat(this.formatNumber(this.amount)," บาทหรือไม่?"),icon:"question",showCancelButton:!0,confirmButtonText:"ยืนยัน",cancelButtonText:"ยกเลิก"}).then((function(e){e.isConfirmed&&t.makePayment()}))}}},v=(r(538),r(55)),component=Object(v.a)(m,(function(){var t=this,e=t._self._c;return e("div",[e("Nevbar"),t._v(" "),e("div",{staticClass:"main"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"card-left"},[e("p",{staticClass:"card-title"},[t._v("เลือกจำนวน")]),t._v(" "),t._l(t.amounts,(function(r,n){return e("div",{key:n,staticClass:"card-item-row"},t._l(r,(function(r){return e("div",{key:r,class:["card-item",{active:t.amount===r}],on:{click:function(e){t.amount=r}}},[e("p",[t._v(t._s(t.formatNumber(r))+" บาท")])])})),0)}))],2),t._v(" "),e("div",{staticClass:"card-right"},[e("p",{staticClass:"card-title"},[t._v("รายละเอียด")]),t._v(" "),e("p",{staticClass:"card-title-text"},[t._v("จำนวนเงิน "+t._s(t.formatNumber(t.amount))+" บาท")]),t._v(" "),e("button",{staticClass:"card-button",on:{click:t.topup}},[t._v("เติมเงิน")])])])])],1)}),[],!1,null,"5fbcea34",null);e.default=component.exports}}]);