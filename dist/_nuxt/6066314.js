(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{426:function(t,n,e){var content=e(489);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(59).default)("34fba5eb",content,!0,{sourceMap:!1})},488:function(t,n,e){"use strict";e(426)},489:function(t,n,e){var o=e(58)((function(i){return i[1]}));o.push([t.i,"table[data-v-95d1d858]{border-collapse:collapse;margin-top:20px;width:100%}td[data-v-95d1d858],th[data-v-95d1d858]{border:1px solid #ddd;padding:8px;text-align:left}th[data-v-95d1d858]{background-color:#f4f4f4}button[data-v-95d1d858]{border:none;cursor:pointer;margin-right:5px;padding:5px 10px}button[data-v-95d1d858]:hover{background-color:#ddd}.modal[data-v-95d1d858]{background:#fff;box-shadow:0 0 10px rgba(0,0,0,.2);left:50%;padding:20px;position:fixed;top:50%;transform:translate(-50%,-50%);z-index:1000}",""]),o.locals={},t.exports=o},560:function(t,n,e){"use strict";e.r(n);var o=e(0),r=e(43),c=(e(20),e(21),e(37),e(5),e(3),e(253),e(7),e(8),e(6),e(2),e(4),e(73)),l=e(119),d=e.n(l);function f(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,o)}return e}var v={layout:"menu",data:function(){return{userdatelist:[]}},mounted:function(){this.getuser()},methods:{getuser:function(){var t=this;c.a.database().ref("users").on("value",(function(n){var data=n.val();t.userdatelist=Object.entries(data||{}).map((function(t){var n=Object(r.a)(t,2);return function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?f(Object(e),!0).forEach((function(n){Object(o.a)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):f(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}({id:n[0]},n[1])}))}),(function(t){console.error("เกิดข้อผิดพลาดในการดึงข้อมูล:",t)}))},viewUser:function(t){d.a.fire({title:"รายละเอียดผู้ใช้",html:"\n            <p><strong>ชื่อ:</strong> ".concat(t.firstname," ").concat(t.lastname,"</p>\n            <p><strong>โทรศัพท์:</strong> ").concat(t.phone,"</p>\n            <p><strong>บทบาท:</strong> ").concat(t.role,"</p>\n            <p><strong>เลขบัตรประชาชน:</strong> ").concat(t.idcard,"</p>\n            <p><strong>วันเกิด:</strong> ").concat(t.birth,"</p>\n          "),showConfirmButton:!0})},viewBank:function(t){d.a.fire({title:"รายละเอียดบัญชีธนาคาร",html:"\n            <p><strong>ชื่อบัญชี:</strong> ".concat(t.bank.name,"</p>\n            <p><strong>ธนาคาร:</strong> ").concat(t.bank.bank,"</p>\n            <p><strong>สาขา:</strong> ").concat(t.bank.branch,"</p>\n            <p><strong>หมายเลขบัญชี:</strong> ").concat(t.bank.number,"</p>\n          "),showConfirmButton:!0})},editUser:function(t){var n=this;d.a.fire({title:"แก้ไขข้อมูลผู้ใช้",html:'\n            <input id="swal-firstname" class="swal2-input" placeholder="ชื่อ" value="'.concat(t.firstname,'">\n            <input id="swal-lastname" class="swal2-input" placeholder="นามสกุล" value="').concat(t.lastname,'">\n            <input id="swal-phone" class="swal2-input" placeholder="โทรศัพท์" value="').concat(t.phone,'">\n            <select id="swal-role" class="swal2-input">\n              <option value="user" ').concat("user"===t.role?"selected":"",'>ผู้ใช้</option>\n              <option value="admin" ').concat("admin"===t.role?"selected":"",">ผู้ดูแลระบบ</option>\n            </select>\n          "),focusConfirm:!1,showCancelButton:!0,preConfirm:function(){return{firstname:document.getElementById("swal-firstname").value,lastname:document.getElementById("swal-lastname").value,phone:document.getElementById("swal-phone").value,role:document.getElementById("swal-role").value}}}).then((function(e){e.isConfirmed&&c.a.database().ref("users/".concat(t.id)).update(e.value).then((function(){d.a.fire("อัปเดตสำเร็จ!","","success"),n.getuser()})).catch((function(t){d.a.fire("เกิดข้อผิดพลาด!",t.message,"error")}))}))},deleteUser:function(t){var n=this;d.a.fire({title:"คุณแน่ใจหรือไม่?",text:"การลบนี้ไม่สามารถย้อนกลับได้!",icon:"warning",showCancelButton:!0,confirmButtonText:"ใช่, ลบเลย!",cancelButtonText:"ยกเลิก"}).then((function(e){e.isConfirmed&&c.a.database().ref("users/".concat(t)).remove().then((function(){d.a.fire("ลบสำเร็จ!","ข้อมูลผู้ใช้ถูกลบแล้ว","success"),n.getuser()})).catch((function(t){d.a.fire("เกิดข้อผิดพลาด!",t.message,"error")}))}))}}},h=v,m=(e(488),e(53)),component=Object(m.a)(h,(function(){var t=this,n=t._self._c;return n("div",[n("h1",[t._v("จัดการผู้ใช้")]),t._v(" "),n("table",[t._m(0),t._v(" "),n("tbody",t._l(t.userdatelist,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.firstname))]),t._v(" "),n("td",[t._v(t._s(e.lastname))]),t._v(" "),n("td",[t._v(t._s(e.phone))]),t._v(" "),n("td",[t._v(t._s(e.role))]),t._v(" "),n("td",[n("button",{on:{click:function(n){return t.viewUser(e)}}},[t._v("ดูข้อมูล")]),t._v(" "),n("button",{on:{click:function(n){return t.editUser(e)}}},[t._v("แก้ไข")]),t._v(" "),n("button",{on:{click:function(n){return t.deleteUser(e.id)}}},[t._v("ลบ")]),t._v(" "),n("button",{on:{click:function(n){return t.viewBank(e)}}},[t._v("ดูข้อมูลบัญชี")])])])})),0)])])}),[function(){var t=this,n=t._self._c;return n("thead",[n("tr",[n("th",[t._v("ชื่อ")]),t._v(" "),n("th",[t._v("นามสกุล")]),t._v(" "),n("th",[t._v("โทรศัพท์")]),t._v(" "),n("th",[t._v("บทบาท")]),t._v(" "),n("th",[t._v("การจัดการ")])])])}],!1,null,"95d1d858",null);n.default=component.exports}}]);