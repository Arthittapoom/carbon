(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{432:function(t,e,r){var content=r(492);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(60).default)("1b02e589",content,!0,{sourceMap:!1})},491:function(t,e,r){"use strict";r(432)},492:function(t,e,r){var n=r(59)((function(i){return i[1]}));n.push([t.i,".withdraw-table[data-v-982378da]{border-collapse:collapse;font-size:16px;margin-top:20px;width:100%}.withdraw-table td[data-v-982378da],.withdraw-table th[data-v-982378da]{border:1px solid #ddd;padding:12px;text-align:left}.withdraw-table th[data-v-982378da]{background:#f4f4f4;font-weight:700;text-align:center}.withdraw-table-body tr[data-v-982378da]:nth-child(2n){background:#f9f9f9}.status-pending[data-v-982378da]{color:#ff9800;font-weight:700}.status-success[data-v-982378da]{color:#4caf50;font-weight:700}.bank-info p[data-v-982378da]{margin:4px 0}.confirm-btn[data-v-982378da]{background:#007bff;border:none;border-radius:4px;color:#fff;cursor:pointer;padding:8px 12px}.confirm-btn[data-v-982378da]:hover{background:#0056b3}",""]),n.locals={},t.exports=n},567:function(t,e,r){"use strict";r.r(e);r(35);var n=r(43),o=r(0),c=r(41),d=r(38),f=(r(80),r(5),r(20),r(3),r(460),r(22),r(462),r(257),r(7),r(8),r(6),r(2),r(463),r(65),r(466),r(467),r(468),r(472),r(473),r(474),r(475),r(477),r(479),r(481),r(483),r(484),r(485),r(486),r(487),r(489),r(4),r(69),r(74));function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){Object(o.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var h={layout:"menu",data:function(){return{uid:"",formList:[]}},mounted:function(){var t=this;f.a.auth().onAuthStateChanged((function(e){e?(t.uid=e.uid,t.fetchwithdraw()):Swal.fire({icon:"error",title:"เกิดข้อผิดพลาด",text:"กรุณาเข้าสู่ระบบ",confirmButtonText:"ตกลง",confirmButtonColor:"#007BFF"}).then((function(){t.$router.push("/login")}))}))},methods:{formatNumber:function(t){return new Intl.NumberFormat("th-TH").format(t)},confirmWithdraw:function(t){return Object(d.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.database().ref("withdraw").once("value");case 3:if(r=e.sent,n=r.val()){e.next=8;break}return console.warn("ไม่มีข้อมูล withdraw"),e.abrupt("return");case 8:if(o={},Object.entries(n).forEach((function(e){var r=Object(c.a)(e,2),n=r[0];r[1][t]&&(o["withdraw/".concat(n,"/").concat(t,"/status")]=1)})),!(Object.keys(o).length>0)){e.next=16;break}return e.next=13,f.a.database().ref().update(o);case 13:console.log("อัปเดตสถานะสำเร็จ"),e.next=17;break;case 16:console.warn("ไม่พบรายการที่ต้องอัปเดต");case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error("เกิดข้อผิดพลาดในการอัปเดต:",e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})))()},fetchwithdraw:function(){var t=this;return Object(d.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(r=f.a.database().ref("withdraw")).on("value",function(){var e=Object(d.a)(regeneratorRuntime.mark((function e(r){var data,o,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(data=r.val())){e.next=11;break}return t.formList=Object.entries(data).flatMap((function(t){var e=Object(c.a)(t,2),r=e[0],n=e[1];return Object.entries(n).map((function(t){var e=Object(c.a)(t,2),n=e[0];return l(l({},e[1]),{},{key:n,uid:r,userData:null})}))})),o=Object(n.a)(new Set(t.formList.map((function(t){return t.uid})))),v=o.map(function(){var t=Object(d.a)(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.database().ref("users/".concat(e)).once("value");case 2:return r=t.sent,t.abrupt("return",{uid:e,userData:r.val()});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.next=7,Promise.all(v);case 7:e.sent.forEach((function(e){var r=e.uid,n=e.userData;t.formList.forEach((function(e){e.uid===r&&t.$set(e,"userData",n)}))})),e.next=12;break;case 11:t.formList=[];case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.withdrawRef=r}catch(t){console.error("เกิดข้อผิดพลาดในการดึงข้อมูล:",t)}case 1:case"end":return e.stop()}}),e)})))()}}},w=h,_=(r(491),r(55)),component=Object(_.a)(w,(function(){var t=this,e=t._self._c;return e("div",[e("h1",[t._v("รายการคำขอถอนเงิน")]),t._v(" "),e("table",{staticClass:"withdraw-table"},[t._m(0),t._v(" "),e("tbody",{staticClass:"withdraw-table-body"},t._l(t.formList,(function(r,n){var o,c,d,f,v;return e("tr",{key:n},[e("td",[t._v(t._s(r.date))]),t._v(" "),e("td",[t._v(t._s(r.time))]),t._v(" "),e("td",[t._v(t._s(t.formatNumber(r.amount))+" ฿")]),t._v(" "),e("td",[e("span",{class:{"status-pending":0===r.status,"status-success":1===r.status}},[t._v("\n                        "+t._s(0===r.status?"รอดำเนินการ":"สำเร็จ")+"\n                    ")])]),t._v(" "),e("td",[null!==(o=r.userData)&&void 0!==o&&o.bank?e("div",{staticClass:"bank-info"},[e("p",[e("strong",[t._v("ธนาคาร:")]),t._v(" "+t._s(null===(c=r.userData.bank)||void 0===c?void 0:c.bank))]),t._v(" "),e("p",[e("strong",[t._v("สาขา:")]),t._v(" "+t._s(null===(d=r.userData.bank)||void 0===d?void 0:d.branch))]),t._v(" "),e("p",[e("strong",[t._v("ชื่อบัญชี:")]),t._v(" "+t._s(null===(f=r.userData.bank)||void 0===f?void 0:f.name))]),t._v(" "),e("p",[e("strong",[t._v("เลขบัญชี:")]),t._v(" "+t._s(null===(v=r.userData.bank)||void 0===v?void 0:v.number))])]):e("div",[t._v("-")])]),t._v(" "),e("td",[e("button",{staticClass:"confirm-btn",on:{click:function(e){return t.confirmWithdraw(r.key)}}},[t._v("ยืนยัน")])])])})),0)])])}),[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("วันที่")]),t._v(" "),e("th",[t._v("เวลา")]),t._v(" "),e("th",[t._v("จำนวนเงิน")]),t._v(" "),e("th",[t._v("สถานะ")]),t._v(" "),e("th",[t._v("บัญชีธนาคาร")]),t._v(" "),e("th",[t._v("ดำเนินการ")])])])}],!1,null,"982378da",null);e.default=component.exports}}]);